\chapter{Introduction and preliminaries}

\section{De- and refunctionalization}

\section{Copatterns}

\section{Uroboro}

\section{Summary of content}

\section{Preliminaries}

\subsection{Order independence}

\subsubsection{From order-dependent to order-independent}

...

\subsection{Generic evaluation contexts}

The reduction relation of the next chapter will be defined relative to a \textit{generic evaluation context}. This concept is introduced in this section.

\begin{definition}[Generic evaluation context for a term]
A generic evaluation context (g.e.c.) $\mathcal{GE}$ for a term $t$ is either the hole $[]$ or $t$ with all of its $n$ immediate subterms replaced by placeholders from the placeholder set $P = \{p_1, ..., p_n, ...\}$ such that the $i-th$ immediate subterm, numbered from left to right, is replaced by $p_i$.
\end{definition}

\begin{definition}[Set of g.e.c.s for a placeholder order]
The set of g.e.c.s for a placeholder order $<$, in symbols $\textrm{EC}_<$ is the set of all g.e.c.s for the placeholder set $P$ ordered by $<$.
\end{definition}

Using these definitions, the generic form of the evaluation contexts can be specified without yet knowing the set of terms which are to be considered values. Next, we define what it means to be an instance of a g.e.c., or of a set of g.e.c.s, induced by such a value set. Almost any set of terms can be a value set, we only require that it is closed under substitution of subterms, i.e.: Let $\textrm{Val}$ be a set of values, and $a, b, c \in \textrm{Val}$ with $a$ a subterm of $c$. Then $c[a \mapsto b] \in \textrm{Val}$.

\begin{definition}[Instance of a g.e.c.]
An instance of a g.e.c. $\mathcal{GE}$ induced by a set of values $\textrm{Val}$ with respect to  a placeholder order $<$ is a term $\mathcal{GE}[p_1 \mapsto t_1, ..., p_n \mapsto t_n]$, where the $p_i$ are the placeholders of $\mathcal{GE}$ and where the following holds for the $t_i$:
\[
t_{i_1} \in \textrm{Val}, ..., t_{i_{k-1}} \in \textrm{Val}, t_{i_k} \textrm{is a g.e.c. induced by Val with respect to } <,
\]
for some $k \in \{1, ..., n\}$, and where $p_{i_1} < p_{i_2} < ... < p_{i_n}$.
\end{definition}

\begin{definition}[Instance of a set of g.e.c.s]
An \textit{instance} $\textrm{EC}_<[\textrm{Val}]$ \textit{of a set} of g.e.c.s $\textrm{EC}_<$, for a placeholder order $<$, \textit{induced by $\textrm{Val}$} is the set of all instances, induced by $\textrm{Val}$ with respect to $<$, of all elements of $\textrm{EC}$.
\end{definition}

Regarding generic evaluation contexts, we show a number of lemmas used further on in this work.

\begin{lemma}
When $\mathcal{E} \in \textrm{EC}_<[{\textrm{Val}}]$, for some instance of a set of g.e.c.s $\textrm{EC}_<[\textrm{Val}]$ and it holds that
\[
a \in \textrm{Val} \implies b \in \textrm{Val},
\]
then $\mathcal{E}[a \mapsto b] \in \textrm{EC}_<[\textrm{Val}]$.

\begin{proof}
We know that $\mathcal{E}$ is an instance $\mathcal{GE}[p_1 \mapsto t_1, ..., p_n \mapsto t_n]$ of a generic evaluation context $\mathcal{GE}$, and that $a$ is a subterm of $t_k$ for a $k \in \{1, ..., n\}$. On one hand, suppose $a \in \textrm{Val}$. Then it is $b \in \textrm{Val}$ and thus $t_k[a \mapsto b] \in \textrm{Val}$. On the other hand, suppose $a \not\in \textrm{Val}$. Either way, the membership in $\textrm{Val}$ of the $t_i$ preceding (under $<$) the hole, as required by Definition 1.5.3, is still fulfilled when replacing $t_k$ with $t_k[a \mapsto b]$. Thus $\mathcal{E}[a \mapsto b] = \mathcal{GE}[p_1 \mapsto t_1, ..., p_{k-1} \mapsto t_{k-1}, p_k \mapsto t_k[a \mapsto b], p_{k+1} \mapsto p_{k+1}, ..., p_n \mapsto t_n] \in \textrm{EC}_<[\textrm{Val}]$.
\end{proof}
\end{lemma}
